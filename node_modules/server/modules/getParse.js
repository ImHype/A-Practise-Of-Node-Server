var url =require("url");
var qs = require("querystring");

var query =function(req,res,next){
    req.query={};
    var querystring = url.parse(req.url).query;
    //请求部分;
    if(querystring){
        var queryObj= qs.parse(querystring);
        //赋值之后直接调用req.query即可获得请求参数所带的数组
    		var queryClean = {};
		    for(var attr in queryObj) {
		    	if(!!attr){
		    		queryClean[attr] = queryObj[attr];
		    	}
		    }
		    req.query = queryClean;
    }
    next();
};
module.exports = query;